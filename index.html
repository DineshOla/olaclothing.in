<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ola Clothing</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <span>Ola Clothing</span>
            </div>
            <div class="search-bar">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="search-input" placeholder="Search Shirt, Jeans, or Code">
                <button id="search-btn"><i class="fas fa-search"></i></button>
                <div class="search-dropdown" id="search-dropdown"></div>
            </div>
            <button class="hamburger" id="hamburger">
                <i class="fas fa-bars"></i>
            </button>
            <nav id="header-nav">
                <a href="#home">Home</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
                <div class="user-profile">
                    <div class="user-image-container">
                        <img id="user-image" src="img/default-user.png" alt="User Image">
                    </div>
                    <span id="user-name" style="cursor: pointer;"></span>
                    <a href="profile.html" id="profile-link">Profile</a>
                </div>
                <a href="#cart">Cart (<span id="cart-count">0</span>)</a>
                <a href="#order-history">Orders</a>
            </nav>
        </div>
    </header>

    <main>
        <!-- User Details Popup Modal -->
        <div class="user-details-modal" id="user-details-modal">
            <div class="user-details-content">
                <span class="close" id="close-user-details">×</span>
                <h2>User Details</h2>
                <div id="modal-user-details">
                    <p><strong>Name:</strong> <span id="modal-detail-name"></span></p>
                    <p><strong>Email:</strong> <span id="modal-detail-email"></span></p>
                    <p><strong>Address:</strong> <span id="modal-detail-address"></span></p>
                </div>
                <button id="update-profile-btn" onclick="window.location.href='profile.html'">Update Profile</button>
            </div>
        </div>

        <section class="hero">
            <picture>
                <source media="(max-width: 480px)" srcset="img/Main-Banners-mobile.jpg">
                <source media="(max-width: 768px)" srcset="img/Main-Banners-tablet.jpg">
                <img src="img/Main-Banners.jpg" alt="Main Banner" width="100%" onerror="console.log('Failed to load banner image')">
            </picture>
        </section>

        <section class="discounts">
            <div class="discount-box-men">
                <h2>FLAT <span>10%</span> OFF ON MEN WEARABLES</h2>
            </div>
            <div class="discount-box-women">
                <h2>FLAT <span>40%</span> OFF ON WOMEN WEARABLES</h2>
            </div>
        </section>

        <section class="categories" id="mens-categories">
            <h2>Men Categories</h2>
            <div class="category-grid">
                <div class="category-item">
                    <a href="shirts.html"><img src="img/men_shirts.jpeg" alt="Shirts"></a>
                    <p>Shirts</p>
                </div>
                <div class="category-item">
                    <a href="denim.html"><img src="img/men_denim.jpg.webp" alt="Denim" height="91px" width="121px"></a>
                    <p>Denim</p>
                </div>
                <div class="category-item">
                    <a href="polos-tees.html"><img src="img/men_polos&tees.jpg" alt="Polos & Tees"></a>
                    <p>Polos & Tees</p>
                </div>
                <div class="category-item">
                    <a href="shoes.html"><img src="img/ men_shoes.jpg" alt="Shoes"></a>
                    <p>Shoes</p>
                </div>
            </div>
        </section>

        <section class="categories" id="womens-categories">
            <h2>Women Categories</h2>
            <div class="category-grid">
                <div class="category-item">
                    <a href="bags.html"><img src="img/women_bags.jpg" alt="Bags"></a>
                    <p>Bags</p>
                </div>
                <div class="category-item">
                    <a href="dress.html"><img src="img/women_dresses.jpg" alt="Dresses"></a>
                    <p>Dresses</p>
                </div>
                <div class="category-item">
                    <a href="tops.html"><img src="img/women_tops.jpg" alt="Tops"></a>
                    <p>Tops</p>
                </div>
                <div class="category-item">
                    <a href="jeans.html"><img src="img/women_jeans.jpg" alt="Denim"></a>
                    <p>Jeans</p>
                </div>
            </div>
        </section>

        <!-- Product List Section -->
        <section class="product-list" id="product-list">
            <h2>Featured Products</h2>
            <div id="product-container" class="container"></div>
        </section>

        <div class="cart-modal" id="cart-modal">
            <div class="cart-content">
                <span class="close" id="close-cart">×</span>
                <h2>Shopping Cart</h2>
                <div id="cart-items"></div>
                <select id="payment-method">
                    <option value="credit-card">Credit Card</option>
                    <option value="paypal">PayPal</option>
                    <option value="net-banking">Net Banking</option>
                </select>
                <button id="buy-now">Buy Now</button>
            </div>
        </div>
        <div class="order-history-modal" id="order-history-modal">
            <div class="order-history-content">
                <span class="close" id="close-order-history">×</span>
                <h2>Order History</h2>
                <div id="order-history-items"></div>
            </div>
        </div>
    </main>

    <footer id="contact" class="footer-container">
        <h2>Contact Us</h2>
        <p>Email: <a href="mailto:2023bcadinesh13503@poornima.edu.in">2023bcadinesh13503@poornima.edu.in</a></p>
        <p>Phone: <a href="tel:+9166513832">+91 9166513832</a></p>
        <p>Address: Jaipur, Rajasthan, India</p>
        <div class="footer-bottom">
            <div class="copyright">
                <i class="fa-regular fa-copyright"></i> 2025 <span class="highlight">Ola Clothing</span>. All Rights Reserved.
            </div>
            <div class="made-with-love">
                Made with <i class="fa fa-heart" style="font-size:25px;color:red;"></i> in India by Dinesh Ola
            </div>
            <div class="social-icons">
                <a href="#" target="_blank" class="social-icon" aria-label="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://x.com/dineshola_" target="_blank" class="social-icon" aria-label="Twitter">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="https://www.instagram.com/dineshola_" target="_blank" class="social-icon" aria-label="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.linkedin.com/in/--dinesh-kumar" target="_blank" class="social-icon" aria-label="LinkedIn">
                    <i class="fab fa-linkedin-in"></i>
                </a>
                <a href="#" target="_blank" class="social-icon" aria-label="Pinterest">
                    <i class="fab fa-pinterest"></i>
                </a>
                <a href="#" target="_blank" class="social-icon" aria-label="YouTube">
                    <i class="fab fa-youtube"></i>
                </a>
            </div>
            <button onclick="topFunction()" class="back-to-top" aria-label="Back to top"> ↑</button>
        </div>
    </footer>

    <script src="scriptaddtcart.js"></script>
    <script>
        // Sample product data with category links
        const products = [
            { id: 1, name: "Men's Casual Shirt", category: "Shirts", price: 799, image: "img/men_shirts.jpeg", link: "shirts.html" },
            { id: 2, name: "Men's Denim Jeans", category: "Denim", price: 1299, image: "img/men_denim.jpg.webp", link: "denim.html" },
            { id: 3, name: "Men's Polo Tee", category: "Polos & Tees", price: 599, image: "img/men_polos&tees.jpg", link: "polos-tees.html" },
            { id: 4, name: "Men's Sneakers", category: "Shoes", price: 1999, image: "img/men_shoes_2_sneaker.jpeg", link: "shoes.html" },
            { id: 5, name: "Women's Handbag", category: "Bags", price: 1499, image: "img/women_bags.jpg", link: "bags.html" },
            { id: 6, name: "Women's Dress", category: "Dresses", price: 1799, image: "img/women_dresses.jpg", link: "dress.html" },
            { id: 7, name: "Women's Top", category: "Tops", price: 699, image: "img/women_tops.jpg", link: "tops.html" },
            { id: 8, name: "Women's Jeans", category: "Jeans", price: 1199, image: "img/women_jeans.jpg", link: "jeans.html" }
        ];

        // Function to display products in the main product list
        function displayProducts(productList) {
            const productContainer = document.getElementById('product-container');
            productContainer.innerHTML = '';

            productList.forEach(product => {
                const productItem = document.createElement('div');
                productItem.classList.add('category-item');
                productItem.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <div class="details">
                        <div class="description">${product.name}</div>
                        <div class="price">₹${product.price}</div>
                        <div class="button-group">
                            <button class="add-to-cart">Add to Cart</button>
                            <button class="buy-now">Buy Now</button>
                        </div>
                    </div>
                `;
                productContainer.appendChild(productItem);
            });
        }

        // Function to display search results in the dropdown
        function displaySearchDropdown(productList) {
            const searchDropdown = document.getElementById('search-dropdown');
            searchDropdown.innerHTML = '';

            if (productList.length === 0) {
                searchDropdown.style.display = 'none';
                return;
            }

            productList.forEach(product => {
                const dropdownItem = document.createElement('div');
                dropdownItem.classList.add('search-dropdown-item');
                dropdownItem.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <div class="dropdown-details">
                        <div class="dropdown-name">${product.name}</div>
                        <div class="dropdown-price">₹${product.price}</div>
                    </div>
                `;
                // Redirect to product page on click
                dropdownItem.addEventListener('click', () => {
                    window.location.href = product.link;
                });
                searchDropdown.appendChild(dropdownItem);
            });
            searchDropdown.style.display = 'block';
        }

        // Function to load user profile and image
        function loadUserProfile() {
            const loggedInUser = localStorage.getItem('loggedInUser');
            const userNameSpan = document.getElementById('user-name');
            const profileLink = document.getElementById('profile-link');
            const userDetailsModal = document.getElementById('user-details-modal');
            const userImage = document.getElementById('user-image');
            const modalDetailName = document.getElementById('modal-detail-name');
            const modalDetailEmail = document.getElementById('modal-detail-email');
            const modalDetailAddress = document.getElementById('modal-detail-address');

            if (loggedInUser) {
                const user = JSON.parse(loggedInUser);
                userNameSpan.textContent = `Hello, ${user.name} | `;
                profileLink.textContent = 'Logout';
                profileLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    localStorage.removeItem('loggedInUser');
                    localStorage.removeItem('userImage');
                    window.location.href = 'profile.html';
                });

                // Load user image from localStorage if available
                const savedImage = localStorage.getItem('userImage');
                if (savedImage) {
                    userImage.src = savedImage;
                    userImage.style.display = 'block';
                }

                modalDetailName.textContent = user.name;
                modalDetailEmail.textContent = user.email;
                modalDetailAddress.textContent = user.address || 'Not provided';

                userNameSpan.addEventListener('click', () => {
                    userDetailsModal.style.display = 'flex';
                });
            } else {
                userNameSpan.textContent = '';
                profileLink.textContent = 'Profile';
                userImage.style.display = 'none';
            }

            document.getElementById('close-user-details').addEventListener('click', () => {
                userDetailsModal.style.display = 'none';
            });

            userDetailsModal.addEventListener('click', (e) => {
                if (e.target === userDetailsModal) {
                    userDetailsModal.style.display = 'none';
                }
            });
        }

        // Search functionality
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('search-input');
            const searchBtn = document.getElementById('search-btn');
            const searchDropdown = document.getElementById('search-dropdown');

            // Display all products initially
            displayProducts(products);

            // Search on input (real-time filtering for dropdown)
            searchInput.addEventListener('input', () => {
                const searchTerm = searchInput.value.toLowerCase();
                if (searchTerm === '') {
                    searchDropdown.style.display = 'none';
                    displayProducts(products);
                    return;
                }

                const filteredProducts = products.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) || 
                    product.category.toLowerCase().includes(searchTerm)
                );
                displaySearchDropdown(filteredProducts);
                displayProducts(filteredProducts);
            });

            // Search on button click
            searchBtn.addEventListener('click', () => {
                const searchTerm = searchInput.value.toLowerCase();
                const filteredProducts = products.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) || 
                    product.category.toLowerCase().includes(searchTerm)
                );
                displayProducts(filteredProducts);
                searchDropdown.style.display = 'none';
            });

            // Hide dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
                    searchDropdown.style.display = 'none';
                }
            });

            // Load user profile and image
            loadUserProfile();
        });

        // Fallback to ensure user profile loads even if DOMContentLoaded is missed
        window.onload = () => {
            loadUserProfile();
        };

        // Hamburger Menu Toggle
        document.getElementById('hamburger').addEventListener('click', function() {
            const nav = document.getElementById('header-nav');
            nav.classList.toggle('active');
            this.innerHTML = nav.classList.contains('active') ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
        });

        // Header Scroll Effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Back to Top Button
        const backToTopBtn = document.querySelector(".back-to-top");
        window.addEventListener("scroll", () => {
            if (window.scrollY > 100) {
                backToTopBtn.style.display = "block";
            } else {
                backToTopBtn.style.display = "none";
            }
        });

        backToTopBtn.addEventListener("click", () => {
            window.scrollTo({
                top: 0,
                behavior: "smooth"
            });
        });
    </script>
</body>
</html>